import type { FC } from "react";
import logo from "../assets/Perfil.svg";
import { highlightItems, terminalSnippets } from "../content/siteContent";

const Hero: FC = () => {
  return (
    <section className="hero" id="home">
      <div className="container hero__inner">
        <div className="hero__copy">
          <span className="hero__eyebrow">Product-minded engineer · Remote friendly</span>
          <h1 className="hero__title">Hi, I&apos;m Victor Bash.</h1>
          <p className="hero__tagline">
            I build full-stack web products that feel effortless to use and effortless to maintain.
          </p>
          <p className="hero__description">
            From whiteboard to production, I design architectures, craft TypeScript interfaces, and
            launch dependable Node.js services. I look after the developer experience so teams keep a
            healthy shipping cadence.
          </p>
          <div className="hero__actions">
            <a className="btn btn--primary" href="mailto:hello@victorbash.com">
              let&apos;s collaborate
            </a>
            <a
              className="btn btn--ghost"
              href="https://github.com/victorbash400"
              target="_blank"
              rel="noreferrer"
            >
              browse repos
            </a>
          </div>
          <div className="hero__highlights">
            {highlightItems.map((item) => (
              <div key={item.label} className="highlight-card">
                <span className="highlight-card__label">{item.label}</span>
                <p className="highlight-card__detail">{item.detail}</p>
              </div>
            ))}
          </div>
        </div>

        <div className="hero__visual">
          <div className="profile-card">
            <div className="profile-card__frame">
              <img src={logo} alt="Victor Bash brand mark" />
            </div>
            <div className="profile-card__meta">
              <span className="profile-card__tag">Available for freelance &amp; product roles</span>
              <span className="profile-card__status">Currently building developer tooling @ Oasis</span>
            </div>
          </div>

          <div className="terminal-stack">
            {terminalSnippets.map((terminal) => (
              <div key={terminal.id} className="terminal-card" aria-label={`${terminal.filename} mini terminal`}>
                <header className="terminal-card__header">
                  <div className="terminal-card__dots" aria-hidden="true">
                    <span className="terminal-card__dot terminal-card__dot--red" />
                    <span className="terminal-card__dot terminal-card__dot--amber" />
                    <span className="terminal-card__dot terminal-card__dot--green" />
                  </div>
                  <span className="terminal-card__title">{terminal.filename}</span>
                </header>
                <div className="terminal-card__body">
                  <p className="terminal-card__prompt">
                    <span className="terminal-card__path">{terminal.prompt}:~$</span> {terminal.command}
                  </p>
                  <ul className="terminal-card__output">
                    {terminal.output.map((line, index) => (
                      <li key={`${terminal.id}-${index}`}>{line}</li>
                    ))}
                  </ul>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

export default Hero;

    const email = "hello@victorbash.com";
    try {
      if (!navigator.clipboard?.writeText) {
        throw new Error("Clipboard API unavailable");
      }

      await navigator.clipboard.writeText(email);
      setCopyState("copied");
      setPingMessage("Email copied — drop a line whenever.");
      schedule(() => setCopyState("idle"), 1800);
    } catch (error) {
      setCopyState("error");
      setPingMessage("Clipboard blocked — reach me at hello@victorbash.com.");
      schedule(() => setCopyState("idle"), 2000);
    }
  };

  const openInNewTab = (url: string) => {
    if (typeof window !== "undefined") {
      window.open(url, "_blank", "noopener,noreferrer");
    }
  };

  const handleOpenGitHub = () => {
    openInNewTab("https://github.com/victorbash400");
    setPingMessage("GitHub profile opened in a fresh tab.");
  };

  const handleOpenMailDraft = () => {
    openInNewTab("mailto:hello@victorbash.com?subject=Hey%20Victor!");
    setPingMessage("Draft email spinning up — see you in the inbox.");
  };

  const actionButtons = [
    {
      id: "copy",
      label: "copy email",
      description:
        copyState === "copied"
          ? "copied to clipboard"
          : "copy address for later",
      onClick: handleCopyEmail,
      variant: "primary" as const,
    },
    {
      id: "github",
      label: "open github",
      description: "peek at current repos",
      onClick: handleOpenGitHub,
    },
    {
      id: "ping",
      label: "send ping",
      description: "spin up a draft email",
      onClick: handleOpenMailDraft,
    },
    {
      id: "shuffle",
      label: "shuffle vibe",
      description: "swap the current status",
      onClick: shufflePing,
    },
  ];

  const heroHighlights = [
    {
      title: "Current mission",
      detail: "Prototyping multi-terminal UI flows that still feel friendly for the web.",
    },
    {
      title: "Superpower",
      detail: "Pairing reliable tooling with calm surfaces so teams keep shipping.",
    },
    {
      title: "Availability",
      detail: "Open to product squads that care about detail, craft, and developer joy.",
    },
  ];

  return (
    <div className="page">
      <div className="page__glow" aria-hidden="true" />

      <header className="topbar">
        <div className="shell topbar__inner">
          <div className="topbar__brand">
            <span className="topbar__dot" aria-hidden="true" />
            <span className="topbar__name">Victor Bash</span>
            <span className="topbar__role">Product Engineer @ Oasis</span>
          </div>
          <div className="topbar__links">
            <button type="button" className="link-btn" onClick={handleOpenGitHub}>
              github
            </button>
            <button type="button" className="link-btn" onClick={handleOpenMailDraft}>
              contact
            </button>
            <button
              type="button"
              className="link-btn link-btn--accent"
              onClick={handleCopyEmail}
            >
              copy email
            </button>
          </div>
        </div>
      </header>

      <main className="page__main">
        <section className="hero">
          <div className="shell hero__inner">
            <div className="hero__grid">
              <div className="hero__intro">
                <span className="hero__eyebrow">UI engineer · terminal UI tinkerer</span>
                <h1 className="hero__title">Hi, I&apos;m Victor Bash.</h1>
                <p className="hero__lead">
                  I build thoughtful web products that keep the developer experience clear
                  and the user experience calm.
                </p>
                <p className="hero__description">
                  From Oasis, I ship polished TypeScript, React, and Vite surfaces that balance
                  pace with precision. Let&apos;s partner if you want interfaces that feel modern
                  without the noise.
                </p>

                <div className="hero__actions">
                  <button
                    type="button"
                    className="primary-btn"
                    onClick={handleOpenMailDraft}
                  >
                    start a project
                  </button>
                  <button
                    type="button"
                    className="secondary-btn"
                    onClick={handleOpenGitHub}
                  >
                    browse github
                  </button>
                </div>

                <div className="hero__pulse" aria-live="polite">
                  {pingMessage}
                </div>

                <div className="hero__highlights">
                  {heroHighlights.map((item) => (
                    <div key={item.title} className="hero__highlight">
                      <span className="hero__highlight-label">{item.title}</span>
                      <p className="hero__highlight-detail">{item.detail}</p>
                    </div>
                  ))}
                </div>
              </div>

              <div className="hero__terminals">
                <div className="terminal terminal--primary">
                  <header className="terminal__header" aria-label="Primary terminal toolbar">
                    <div className="terminal__dots" aria-hidden="true">
                      <span className="terminal__dot terminal__dot--red" />
                      <span className="terminal__dot terminal__dot--amber" />
                      <span className="terminal__dot terminal__dot--green" />
                    </div>
                    <div className="terminal__header-center">
                      <span className="terminal__title">victor@oasis:~/workspace</span>
                      <span className="terminal__clock" aria-label="Local time">
                        {formattedClock} local
                      </span>
                    </div>
                    <span
                      className={`terminal__badge ${
                        isProcessing ? "terminal__badge--pulse" : "terminal__badge--ready"
                      }`}
                    >
                      {isProcessing ? "running" : "ready"}
                    </span>
                  </header>

                  <div className="terminal__body">
                    <pre className="terminal__ascii" aria-hidden="true">
                      {asciiBanner}
                    </pre>

                    <div className="command-bar" role="group" aria-label="Command shortcuts">
                      {commandOrder.map((commandKey) => {
                        const blueprint = commandLibrary[commandKey];
                        return (
                          <button
                            key={commandKey}
                            type="button"
                            className="command-btn"
                            data-active={lastCommand === commandKey}
                            onClick={() => runCommand(commandKey)}
                            disabled={isProcessing}
                          >
                            <span className="command-btn__label">{blueprint.label}</span>
                            <span className="command-btn__desc">{blueprint.description}</span>
                          </button>
                        );
                      })}
                    </div>

                    <div className="terminal__stream" ref={streamRef} aria-live="polite">
                      {log.map((line) => (
                        <div
                          key={line.id}
                          className={`terminal__line terminal__line--${line.variant} ${
                            line.isNew ? "is-new" : ""
                          }`}
                        >
                          <span className="terminal__prefix">{line.prefix}</span>
                          <span className="terminal__content">{renderLineContent(line)}</span>
                        </div>
                      ))}
                    </div>
                  </div>

                  <footer className="terminal__footer terminal__footer--primary">
                    <div className="terminal__footer-actions">
                      <button
                        type="button"
                        className="ghost-btn"
                        onClick={clearHistory}
                        disabled={isProcessing}
                      >
                        clear history
                      </button>
                      <span className="terminal__status" aria-live="polite">
                        {status}
                      </span>
                    </div>
                    <a className="terminal__link" href="mailto:hello@victorbash.com">
                      hello@victorbash.com
                    </a>
                  </footer>
                </div>

                <div className="hero__terminal-cluster">
                  <div className="terminal terminal--compact">
                    <header className="terminal__header" aria-label="Process monitor toolbar">
                      <div className="terminal__dots" aria-hidden="true">
                        <span className="terminal__dot terminal__dot--red" />
                        <span className="terminal__dot terminal__dot--amber" />
                        <span className="terminal__dot terminal__dot--green" />
                      </div>
                      <div className="terminal__header-center">
                        <span className="terminal__title">session monitors</span>
                        <span className="terminal__clock">
                          {activeMonitors.length}/{monitorKeys.length} active
                        </span>
                      </div>
                      <span className="terminal__badge terminal__badge--ghost">live</span>
                    </header>

                    <div className="terminal__body">
                      <p className="prompt">victor@oasis:~$ watch --processes</p>
                      <div className="monitor__chips">
                        {monitorKeys.map((key) => (
                          <button
                            key={key}
                            type="button"
                            className="toggle-chip"
                            data-active={monitors[key]}
                            onClick={() => toggleMonitor(key)}
                            aria-pressed={monitors[key]}
                          >
                            <span className="toggle-chip__label">{monitorMeta[key].label}</span>
                            <span className="toggle-chip__hint">
                              {monitors[key] ? "watching" : "sleeping"}
                            </span>
                          </button>
                        ))}
                      </div>

                      <ul className="monitor__list">
                        {monitorKeys.map((key) => (
                          <li key={`monitor-${key}`}>
                            <span className="monitor__command">{monitorMeta[key].command}</span>
                            <span className="monitor__status">
                              {monitors[key] ? monitorMeta[key].active : monitorMeta[key].idle}
                            </span>
                          </li>
                        ))}
                      </ul>

                      <div className="monitor__metrics" aria-live="polite">
                        <span className="monitor__gauge" aria-hidden="true">
                          [{monitorGauge}]
                        </span>
                        <span>{monitorProgress}% watchers engaged</span>
                      </div>
                    </div>
                  </div>

                  <div className="terminal terminal--compact">
                    <header className="terminal__header" aria-label="Quick actions toolbar">
                      <div className="terminal__dots" aria-hidden="true">
                        <span className="terminal__dot terminal__dot--red" />
                        <span className="terminal__dot terminal__dot--amber" />
                        <span className="terminal__dot terminal__dot--green" />
                      </div>
                      <div className="terminal__header-center">
                        <span className="terminal__title">quick actions</span>
                        <span className="terminal__clock">always on</span>
                      </div>
                      <span className="terminal__badge terminal__badge--ghost">ready</span>
                    </header>

                    <div className="terminal__body">
                      <p className="prompt">victor@oasis:~$ actions --interactive</p>
                      <div className="action-grid" role="group" aria-label="Action shortcuts">
                        {actionButtons.map((action) => (
                          <button
                            key={action.id}
                            type="button"
                            className="action-btn"
                            data-variant={action.variant ?? "secondary"}
                            onClick={action.onClick}
                          >
                            <span className="action-btn__label">{action.label}</span>
                            <span className="action-btn__hint">{action.description}</span>
                          </button>
                        ))}
                      </div>

                      <div className="action-log" data-state={copyState} aria-live="polite">
                        {pingMessage}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  );
};

export default Hero;
